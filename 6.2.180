To: vim-dev@vim.org
Subject: Patch 6.2.180
Fcc: outbox
From: Bram Moolenaar <Bram@moolenaar.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
------------

Patch 6.2.180
Problem:    Compiling with GTK2 on Win32 doesn't work.
Solution:   Include gdkwin32.h instead of gdkx.h. (Srinath Avadhanula)
Files:	    src/gui_gtk.c, src/gui_gtk_f.c, src/gui_gtk_x11.c, src/mbyte.c


*** ../vim-6.2.179/src/gui_gtk.c	Mon Jun  2 22:22:50 2003
--- src/gui_gtk.c	Tue Dec 23 11:41:29 2003
***************
*** 109,115 ****
  #ifdef FEAT_GUI_GTK
  # include <gdk/gdkkeysyms.h>
  # include <gdk/gdk.h>
! # include <gdk/gdkx.h>
  
  # include <gtk/gtk.h>
  #else
--- 109,119 ----
  #ifdef FEAT_GUI_GTK
  # include <gdk/gdkkeysyms.h>
  # include <gdk/gdk.h>
! # ifdef WIN3264
! #  include <gdk/gdkwin32.h>
! # else
! #  include <gdk/gdkx.h>
! # endif
  
  # include <gtk/gtk.h>
  #else
*** ../vim-6.2.179/src/gui_gtk_f.c	Fri Apr 25 19:49:56 2003
--- src/gui_gtk_f.c	Tue Dec 23 11:41:48 2003
***************
*** 32,38 ****
  			   runtime! */
  #include "gui_gtk_f.h"
  #include <gtk/gtksignal.h>
! #include <gdk/gdkx.h>
  
  typedef struct _GtkFormChild GtkFormChild;
  
--- 32,42 ----
  			   runtime! */
  #include "gui_gtk_f.h"
  #include <gtk/gtksignal.h>
! #ifdef WIN3264
! # include <gdk/gdkwin32.h>
! #else
! # include <gdk/gdkx.h>
! #endif
  
  typedef struct _GtkFormChild GtkFormChild;
  
*** ../vim-6.2.179/src/gui_gtk_x11.c	Sat Sep 27 19:36:47 2003
--- src/gui_gtk_x11.c	Tue Dec 23 11:41:57 2003
***************
*** 68,74 ****
  #else
  # include <gdk/gdkkeysyms.h>
  # include <gdk/gdk.h>
! # include <gdk/gdkx.h>
  
  # include <gtk/gtk.h>
  # include "gui_gtk_f.h"
--- 68,78 ----
  #else
  # include <gdk/gdkkeysyms.h>
  # include <gdk/gdk.h>
! # ifdef WIN3264
! #  include <gdk/gdkwin32.h>
! # else
! #  include <gdk/gdkx.h>
! # endif
  
  # include <gtk/gtk.h>
  # include "gui_gtk_f.h"
*** ../vim-6.2.179/src/mbyte.c	Mon Dec 29 21:17:44 2003
--- src/mbyte.c	Tue Dec 23 16:03:30 2003
***************
*** 102,108 ****
  
  #if defined(FEAT_XIM) && defined(HAVE_GTK2)
  # include <gdk/gdkkeysyms.h>
! # include <gdk/gdkx.h>
  #endif
  
  #if defined(FEAT_MBYTE) || defined(PROTO)
--- 102,112 ----
  
  #if defined(FEAT_XIM) && defined(HAVE_GTK2)
  # include <gdk/gdkkeysyms.h>
! # ifdef WIN3264
! #  include <gdk/gdkwin32.h>
! # else
! #  include <gdk/gdkx.h>
! # endif
  #endif
  
  #if defined(FEAT_MBYTE) || defined(PROTO)
***************
*** 3620,3626 ****
  #endif
  
  #ifdef FEAT_GUI_GTK
! # include <gdk/gdkx.h>
  #else
  # ifdef PROTO
  /* Define a few things to be able to generate prototypes while not configured
--- 3624,3634 ----
  #endif
  
  #ifdef FEAT_GUI_GTK
! # ifdef WIN3264
! #  include <gdk/gdkwin32.h>
! # else
! #  include <gdk/gdkx.h>
! # endif
  #else
  # ifdef PROTO
  /* Define a few things to be able to generate prototypes while not configured
*** ../vim-6.2.179/src/version.c	Sun Jan 11 12:32:47 2004
--- src/version.c	Sun Jan 11 12:43:44 2004
***************
*** 639,640 ****
--- 639,642 ----
  {   /* Add new patch number below this line */
+ /**/
+     180,
  /**/

-- 
hundred-and-one symptoms of being an internet addict:
227. You sleep next to your monitor.  Or on top of it.

 /// Bram Moolenaar -- Bram@Moolenaar.net -- http://www.Moolenaar.net   \\\
///        Sponsor Vim, vote for features -- http://www.Vim.org/sponsor/ \\\
\\\              Project leader for A-A-P -- http://www.A-A-P.org        ///
 \\\  Help AIDS victims, buy here: http://ICCF-Holland.org/click1.html  ///
