To: vim-dev@vim.org
Subject: Patch 6.2.332 (extra)
Fcc: outbox
From: Bram Moolenaar <Bram@moolenaar.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
------------

Patch 6.2.332 (extra)
Problem:    Amiga: Compile error for string array. Compiling the Amiga GUI
	    doesn't work.
Solution:   Use a char pointer instead.  Move including "gui_amiga.h" to after
	    including "vim.h".  Add a semicolon. (Ali Akcaagac)
Files:	    src/gui_amiga.c, src/os_amiga.c


*** ../vim-6.2.331/src/gui_amiga.c	Sun Oct  6 20:44:33 2002
--- src/gui_amiga.c	Mon Mar  8 12:01:01 2004
***************
*** 20,27 ****
  #include <proto/graphics.h>
  #include <proto/layers.h>
  #include <assert.h>
- #include "gui_amiga.h"
  #include "vim.h"
  #include <math.h>
  #include <limits.h>
  
--- 20,27 ----
  #include <proto/graphics.h>
  #include <proto/layers.h>
  #include <assert.h>
  #include "vim.h"
+ #include "gui_amiga.h"
  #include <math.h>
  #include <limits.h>
  
***************
*** 784,792 ****
  	SetDrMd(gui.window->RPort, JAM2);
  	atexit(atexitDoThis);
  	TextDimensions();
! 	returnCode = OK; /* we've had sucess */
  	if (gui_win_x != -1 && gui_win_y != -1)
! 	    gui_mch_set_winpos(gui_win_x, gui_win_y)
      }
      gui.menu = NULL;
  
--- 784,792 ----
  	SetDrMd(gui.window->RPort, JAM2);
  	atexit(atexitDoThis);
  	TextDimensions();
! 	returnCode = OK; /* we've had success */
  	if (gui_win_x != -1 && gui_win_y != -1)
! 	    gui_mch_set_winpos(gui_win_x, gui_win_y);
      }
      gui.menu = NULL;
  
*** ../vim-6.2.331/src/os_amiga.c	Sun Feb 29 14:48:02 2004
--- src/os_amiga.c	Mon Mar  8 11:41:04 2004
***************
*** 307,313 ****
      static char_u   *(constrings[3]) = {(char_u *)"con:0/0/662/210/",
  					(char_u *)"con:0/0/640/200/",
  					(char_u *)"con:0/0/320/200/"};
!     static char_u   winerr[] = (char_u *)N_("VIM: Can't open window!\n");
      struct WBArg    *argp;
      int		    ac;
      char	    *av;
--- 307,313 ----
      static char_u   *(constrings[3]) = {(char_u *)"con:0/0/662/210/",
  					(char_u *)"con:0/0/640/200/",
  					(char_u *)"con:0/0/320/200/"};
!     static char_u   *winerr = (char_u *)N_("VIM: Can't open window!\n");
      struct WBArg    *argp;
      int		    ac;
      char	    *av;
*** ../vim-6.2.331/src/version.c	Tue Mar  9 12:41:56 2004
--- src/version.c	Tue Mar  9 14:17:00 2004
***************
*** 639,640 ****
--- 639,642 ----
  {   /* Add new patch number below this line */
+ /**/
+     332,
  /**/

-- 
BLACK KNIGHT: I'm invincible!
ARTHUR:       You're a looney.
                 "Monty Python and the Holy Grail" PYTHON (MONTY) PICTURES LTD

 /// Bram Moolenaar -- Bram@Moolenaar.net -- http://www.Moolenaar.net   \\\
///        Sponsor Vim, vote for features -- http://www.Vim.org/sponsor/ \\\
\\\              Project leader for A-A-P -- http://www.A-A-P.org        ///
 \\\  Buy at Amazon and help AIDS victims -- http://ICCF.nl/click1.html ///
