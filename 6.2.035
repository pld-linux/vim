To: vim-dev@vim.org
Subject: Patch 6.2.035
Fcc: outbox
From: Bram Moolenaar <Bram@moolenaar.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
------------

Patch 6.2.035
Problem:    Mac: Compiler warnings in Python interface.
Solution:   Make a difference between pure Mac and Unix-Mac. (Peter Cucka)
Files:	    src/if_python.c


*** ../vim-6.2.034/src/if_python.c	Sat Apr 19 15:21:01 2003
--- src/if_python.c	Fri Jul 25 21:31:46 2003
***************
*** 41,47 ****
  #endif
  
  #include <Python.h>
! #ifdef MACOS
  # include "macglue.h"
  # include <CodeFragments.h>
  #endif
--- 41,47 ----
  #endif
  
  #include <Python.h>
! #if defined(MACOS) && !defined(MACOS_X_UNIX)
  # include "macglue.h"
  # include <CodeFragments.h>
  #endif
***************
*** 396,402 ****
  	}
  #endif
  
! #ifndef MACOS
  	Py_Initialize();
  #else
  	PyMac_Initialize();
--- 396,402 ----
  	}
  #endif
  
! #if !defined(MACOS) || defined(MACOS_X_UNIX)
  	Py_Initialize();
  #else
  	PyMac_Initialize();
***************
*** 437,443 ****
      static void
  DoPythonCommand(exarg_T *eap, const char *cmd)
  {
! #ifdef MACOS
      GrafPtr oldPort;
      GetPort (&oldPort);
      /* Check if the Python library is available */
--- 437,443 ----
      static void
  DoPythonCommand(exarg_T *eap, const char *cmd)
  {
! #if defined(MACOS) && !defined(MACOS_X_UNIX)
      GrafPtr oldPort;
      GetPort (&oldPort);
      /* Check if the Python library is available */
***************
*** 455,461 ****
      Python_SaveThread();	    /* leave python */
      Python_Lock_Vim();		    /* enter vim */
      PythonIO_Flush();
! #ifdef MACOS
      SetPort (oldPort);
  #endif
  }
--- 455,461 ----
      Python_SaveThread();	    /* leave python */
      Python_Lock_Vim();		    /* enter vim */
      PythonIO_Flush();
! #if defined(MACOS) && !defined(MACOS_X_UNIX)
      SetPort (oldPort);
  #endif
  }
*** ../vim-6.2.034/src/version.c	Fri Jul 25 22:25:04 2003
--- src/version.c	Fri Jul 25 22:27:19 2003
***************
*** 632,633 ****
--- 632,635 ----
  {   /* Add new patch number below this line */
+ /**/
+     35,
  /**/

-- 
If you don't get everything you want, think of
everything you didn't get and don't want.

 /// Bram Moolenaar -- Bram@Moolenaar.net -- http://www.Moolenaar.net   \\\
///          Creator of Vim - Vi IMproved -- http://www.Vim.org          \\\
\\\              Project leader for A-A-P -- http://www.A-A-P.org        ///
 \\\  Help AIDS victims, buy here: http://ICCF-Holland.org/click1.html  ///
